import requests
import bs4

url = "http://getmisc.pythonanywhere.com"

def get_response(url):
    r = requests.get(url)
    if r.status_code == requests.codes.ok:
        r = bs4.BeautifulSoup(r.text, "lxml").select("h1")[0].get_text().strip()
        return r
    else:
        print(r.status_code)

# reset session
print(get_response(url+"/reset"))

# get all ascii letters in binary
nums = []
for i in range(150):
    r = get_response(url)
    if "0" not in r and "1" not in r: break
    num = int("0b"+r, 2)
    nums.append(num)
    print("[+]{}: {}".format(i, num))

out = "".join([chr(num) for num in nums])
print(out)
passwd = out[len(out)-5:-1]

# get the flag with password param
print(get_response("{}?password={}".format(url, passwd)))

